// Numerous.js
// Unobtrusive Javascript helper for dynamically creating fields_for objects for Rails.
// Version 2.0.3
//
// Author: Karl Bryan Paragua
// Source: https://github.com/kbparagua/numerous.js
$(document).ready(function(a){Numerous={};Numerous.init=function(a){var b=$(".numerous");Numerous.addFormHash={};Numerous.options=a||{};for(var c=0,d=b.length;c<d;c++){var e=$(b[c]),f=e.attr("id"),g=f.replace(/fields-for-/,""),h="add-to-"+g,i="#"+g,j=Numerous.options[g];e.removeClass("numerous").attr("id","");var k=$("<div></div>").append(e);Numerous.addFormHash[h]={form:k.html(),"fields-for":f,"update-div":i,list:g};e.remove();Numerous.clickHandlerForAdd(h);Numerous.createHandlersForRemove(g);if(j){var l=j["initial"],m=$("#"+h),n=l;if(typeof l==="function"){n=l()}for(var c=0;c<n;c++){m.trigger("click")}var o=j["after-initialize"];if(o){o()}}}};Numerous.clickHandlerForAdd=function(a){var b="#"+a;$(b).click(function(a){a.preventDefault();var b=Numerous.addFormHash[this.id],c=(new Date).getTime(),d=b["form"].replace(/replace_this/g,c);d=$(d);d.addClass(b["fields-for"]);$(b["update-div"]).append(d);var e=Numerous.options[b["list"]];if(e){var f=e["add"];if(f){f(d)}}})};Numerous.createHandlersForRemove=function(a){var b=".fields-for-"+a+" .numerous-remove a";$("body").off("click",b);$("body").on("click",b,function(b){b.preventDefault();var c=$(this),d=c.parent().parent();c.siblings("input").attr("value","1");d.removeClass("fields-for-"+a);d.hide();var e=Numerous.options[a];if(e){var f=e["remove"];if(f){f(d)}}})};Numerous.count=function(a){return $(".fields-for-"+a).length};Numerous.get=function(a){return $(".fields-for-"+a)};Numerous.removeAll=function(a){Numerous.get(a).find(".numerous-remove a").trigger("click")}})
